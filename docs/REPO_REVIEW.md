# 레포지토리 검토 보고서

작성일: 2026-02-24

## 1) 총평

현재 저장소는 `SPEC.md`/`IMPLEMENTATION_PLAN.md`에서 정의한 로컬 분석 앱 아키텍처를 꽤 충실하게 코드로 옮겨 둔 상태입니다. 특히 `bitnetd`(로컬 LLM 서버)와 `analyzer`(분석 앱)의 책임 분리가 명확하고, 공통 경로/상수는 `shared`로 분리되어 있어 유지보수성이 좋습니다.

다만 테스트 자동화가 비어 있고(`pytest` 기준 테스트 0개), 기능 대비 운영 안전장치(회귀 방지 테스트, 성능 회귀 측정, 장애 주입 시나리오)가 부족해 "기능은 있으나 안정성 신뢰도는 아직 낮은" 단계로 보입니다.

## 2) 잘 된 점

- **아키텍처 분리 명확**: `bitnetd`, `analyzer`, `shared`, `docs` 구조가 명확하며 README의 구조 설명과 일치합니다.
- **명세 중심 개발 흔적**: 스펙 문서(`SPEC.md`)와 구현 계획(`IMPLEMENTATION_PLAN.md`)이 상세하고, 코드에서 해당 정책(토큰, 하트비트/TTL, 로컬 경로, SSE 응답 등)을 반영하는 방향성이 뚜렷합니다.
- **운영 관점 고려**: `docs/`에 수동 설치/복구/스모크 테스트 문서가 있어 사용자 실패 시 복구 루트를 제공하려는 의도가 보입니다.

## 3) 주요 리스크

1. **테스트 부재**
   - 현재 `pytest` 실행 시 테스트가 발견되지 않습니다.
   - 영향: 회귀 버그가 프로덕션 직전까지 숨어들 확률이 큼.

2. **핵심 플로우 통합 검증 부족**
   - `bitnetd` API 계약(`/health`, `/clients/*`, `/generate`)과 `analyzer` 상호작용은 기능적으로 복잡한데, 이를 자동 검증하는 통합 테스트가 보이지 않습니다.

3. **문서-코드 정합성 지속 검증 장치 부족**
   - 문서는 상세하지만, "문서에 선언된 정책이 코드에서 여전히 지켜지는지"를 체크하는 CI 규칙이 부재합니다.

## 4) 권장 우선순위 (실행 순)

### P0 (즉시)
- `bitnetd` API 계약 테스트 추가
  - `/health` 상태 필드, `/clients/register|heartbeat|unregister`의 인증/카운트, `/generate`의 stream/non-stream 계약 검증.
- `analyzer` 라우터 단위 테스트 추가
  - intent 분류, 컬럼 후보 애매성 판정, compare 시 clarify 분기.

### P1 (단기)
- 최소 E2E 스모크 자동화
  - "서버 기동 → analyzer에서 질의 → 카드/메시지 생성" 1개 happy path를 CI에서 자동 수행.
- 실패 시나리오 테스트
  - 모델 미설치, 토큰 불일치, 파일 인코딩/헤더 탐지 실패 등.

### P2 (중기)
- 성능/자원 회귀 체크
  - 대용량 CSV 로드 시간, `/generate` 지연, 메모리 사용량 기준선 측정.

## 5) 결론

프로젝트의 설계 방향과 코드 구조는 좋고, 제품화 가능성이 높은 기반이 마련되어 있습니다. 다음 단계의 핵심은 "기능 추가"보다 **신뢰도(테스트/검증/회귀 방지)**를 먼저 끌어올리는 것입니다. 테스트 커버리지만 확보되면 현재 구조는 충분히 확장 가능한 형태입니다.
